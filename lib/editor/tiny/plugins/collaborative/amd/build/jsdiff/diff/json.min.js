define("tiny_collaborative/jsdiff/diff/json",["exports","./base","./line"],(function(_exports,_base,_line){var obj;Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.canonicalize=canonicalize,_exports.diffJson=function(oldObj,newObj,options){return jsonDiff.diff(oldObj,newObj,options)},_exports.jsonDiff=void 0;const jsonDiff=new(_base=(obj=_base)&&obj.__esModule?obj:{default:obj}).default;function canonicalize(obj,stack,replacementStack,replacer,key){let i,canonicalizedObj;for(stack=stack||[],replacementStack=replacementStack||[],replacer&&(obj=replacer(key,obj)),i=0;i<stack.length;i+=1)if(stack[i]===obj)return replacementStack[i];if("[object Array]"===Object.prototype.toString.call(obj)){for(stack.push(obj),canonicalizedObj=new Array(obj.length),replacementStack.push(canonicalizedObj),i=0;i<obj.length;i+=1)canonicalizedObj[i]=canonicalize(obj[i],stack,replacementStack,replacer,key);return stack.pop(),replacementStack.pop(),canonicalizedObj}if(obj&&obj.toJSON&&(obj=obj.toJSON()),"object"==typeof obj&&null!==obj){stack.push(obj),canonicalizedObj={},replacementStack.push(canonicalizedObj);let key,sortedKeys=[];for(key in obj)Object.prototype.hasOwnProperty.call(obj,key)&&sortedKeys.push(key);for(sortedKeys.sort(),i=0;i<sortedKeys.length;i+=1)key=sortedKeys[i],canonicalizedObj[key]=canonicalize(obj[key],stack,replacementStack,replacer,key);stack.pop(),replacementStack.pop()}else canonicalizedObj=obj;return canonicalizedObj}_exports.jsonDiff=jsonDiff,jsonDiff.useLongestToken=!0,jsonDiff.tokenize=_line.lineDiff.tokenize,jsonDiff.castInput=function(value,options){const{undefinedReplacement:undefinedReplacement,stringifyReplacer:stringifyReplacer=((k,v)=>void 0===v?undefinedReplacement:v)}=options;return"string"==typeof value?value:JSON.stringify(canonicalize(value,null,null,stringifyReplacer),stringifyReplacer,"  ")},jsonDiff.equals=function(left,right,options){return _base.default.prototype.equals.call(jsonDiff,left.replace(/,([\r\n])/g,"$1"),right.replace(/,([\r\n])/g,"$1"),options)}}));

//# sourceMappingURL=json.min.js.map