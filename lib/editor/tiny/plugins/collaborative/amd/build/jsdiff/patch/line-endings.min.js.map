{"version":3,"file":"line-endings.min.js","sources":["../../../src/jsdiff/patch/line-endings.js"],"sourcesContent":["export function unixToWin(patch) {\n  if (Array.isArray(patch)) {\n    return patch.map(unixToWin);\n  }\n\n  return {\n    ...patch,\n    hunks: patch.hunks.map(hunk => ({\n      ...hunk,\n      lines: hunk.lines.map(\n        (line, i) =>\n          (line.startsWith('\\\\') || line.endsWith('\\r') || hunk.lines[i + 1]?.startsWith('\\\\'))\n            ? line\n            : line + '\\r'\n      )\n    }))\n  };\n}\n\nexport function winToUnix(patch) {\n  if (Array.isArray(patch)) {\n    return patch.map(winToUnix);\n  }\n\n  return {\n    ...patch,\n    hunks: patch.hunks.map(hunk => ({\n      ...hunk,\n      lines: hunk.lines.map(line => line.endsWith('\\r') ? line.substring(0, line.length - 1) : line)\n    }))\n  };\n}\n\n/**\n * Returns true if the patch consistently uses Unix line endings (or only involves one line and has\n * no line endings).\n */\nexport function isUnix(patch) {\n  if (!Array.isArray(patch)) { patch = [patch]; }\n  return !patch.some(\n    index => index.hunks.some(\n      hunk => hunk.lines.some(\n        line => !line.startsWith('\\\\') && line.endsWith('\\r')\n      )\n    )\n  );\n}\n\n/**\n * Returns true if the patch uses Windows line endings and only Windows line endings.\n */\nexport function isWin(patch) {\n  if (!Array.isArray(patch)) { patch = [patch]; }\n  return patch.some(index => index.hunks.some(hunk => hunk.lines.some(line => line.endsWith('\\r'))))\n    && patch.every(\n      index => index.hunks.every(\n        hunk => hunk.lines.every(\n          (line, i) => line.startsWith('\\\\') || line.endsWith('\\r') || hunk.lines[i + 1]?.startsWith('\\\\')\n        )\n      )\n    );\n}\n"],"names":["patch","Array","isArray","some","index","hunks","hunk","lines","line","startsWith","endsWith","every","i","_hunk$lines2","unixToWin","map","_hunk$lines","winToUnix","substring","length"],"mappings":"uKAqCuBA,OAChBC,MAAMC,QAAQF,SAAUA,MAAQ,CAACA,eAC9BA,MAAMG,MACZC,OAASA,MAAMC,MAAMF,MACnBG,MAAQA,KAAKC,MAAMJ,MACjBK,OAASA,KAAKC,WAAW,OAASD,KAAKE,SAAS,qCASlCV,OACfC,MAAMC,QAAQF,SAAUA,MAAQ,CAACA,eAC/BA,MAAMG,MAAKC,OAASA,MAAMC,MAAMF,MAAKG,MAAQA,KAAKC,MAAMJ,MAAKK,MAAQA,KAAKE,SAAS,aACrFV,MAAMW,OACPP,OAASA,MAAMC,MAAMM,OACnBL,MAAQA,KAAKC,MAAMI,OACjB,CAACH,KAAMI,6BAAMJ,KAAKC,WAAW,OAASD,KAAKE,SAAS,6BAASJ,KAAKC,MAAMK,EAAI,kCAAfC,aAAmBJ,WAAW,2CAzDrFK,UAAUd,UACpBC,MAAMC,QAAQF,cACTA,MAAMe,IAAID,iBAGZ,IACFd,MACHK,MAAOL,MAAMK,MAAMU,KAAIT,WAClBA,KACHC,MAAOD,KAAKC,MAAMQ,KAChB,CAACP,KAAMI,4BACJJ,KAAKC,WAAW,OAASD,KAAKE,SAAS,2BAASJ,KAAKC,MAAMK,EAAI,2BAAfI,YAAmBP,WAAW,MAC3ED,KACAA,KAAO,0CAMLS,UAAUjB,UACpBC,MAAMC,QAAQF,cACTA,MAAMe,IAAIE,iBAGZ,IACFjB,MACHK,MAAOL,MAAMK,MAAMU,KAAIT,WAClBA,KACHC,MAAOD,KAAKC,MAAMQ,KAAIP,MAAQA,KAAKE,SAAS,MAAQF,KAAKU,UAAU,EAAGV,KAAKW,OAAS,GAAKX"}