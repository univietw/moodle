{"version":3,"file":"line-endings.min.js","sources":["../../../src/jsdiff/patch/line-endings.js"],"sourcesContent":["export function unixToWin(patch) {\n  if (Array.isArray(patch)) {\n    return patch.map(unixToWin);\n  }\n\n  return {\n    ...patch,\n    hunks: patch.hunks.map(hunk => ({\n      ...hunk,\n      lines: hunk.lines.map(\n        (line, i) =>\n          (line.startsWith('\\\\') || line.endsWith('\\r') || hunk.lines[i + 1]?.startsWith('\\\\'))\n            ? line\n            : line + '\\r'\n      )\n    }))\n  };\n}\n\nexport function winToUnix(patch) {\n  if (Array.isArray(patch)) {\n    return patch.map(winToUnix);\n  }\n\n  return {\n    ...patch,\n    hunks: patch.hunks.map(hunk => ({\n      ...hunk,\n      lines: hunk.lines.map(line => line.endsWith('\\r') ? line.substring(0, line.length - 1) : line)\n    }))\n  };\n}\n\n/**\n * Returns true if the patch consistently uses Unix line endings (or only involves one line and has\n * no line endings).\n */\nexport function isUnix(patch) {\n  if (!Array.isArray(patch)) { patch = [patch]; }\n  return !patch.some(\n    index => index.hunks.some(\n      hunk => hunk.lines.some(\n        line => !line.startsWith('\\\\') && line.endsWith('\\r')\n      )\n    )\n  );\n}\n\n/**\n * Returns true if the patch uses Windows line endings and only Windows line endings.\n */\nexport function isWin(patch) {\n  if (!Array.isArray(patch)) { patch = [patch]; }\n  return patch.some(index => index.hunks.some(hunk => hunk.lines.some(line => line.endsWith('\\r'))))\n    && patch.every(\n      index => index.hunks.every(\n        hunk => hunk.lines.every(\n          (line, i) => line.startsWith('\\\\') || line.endsWith('\\r') || hunk.lines[i + 1]?.startsWith('\\\\')\n        )\n      )\n    );\n}\n"],"names":["patch","Array","isArray","some","index","hunks","hunk","lines","line","startsWith","endsWith","every","i","unixToWin","map","winToUnix","substring","length"],"mappings":"8JAqCO,SAAgBA,OAChBC,MAAMC,QAAQF,SAAUA,MAAQ,CAACA,QACtC,OAAQA,MAAMG,MACZC,OAASA,MAAMC,MAAMF,MACnBG,MAAQA,KAAKC,MAAMJ,MACjBK,OAASA,KAAKC,WAAW,OAASD,KAAKE,SAAS,WAIxD,iBAKO,SAAeV,OACfC,MAAMC,QAAQF,SAAUA,MAAQ,CAACA,QACtC,OAAOA,MAAMG,MAAKC,OAASA,MAAMC,MAAMF,MAAKG,MAAQA,KAAKC,MAAMJ,MAAKK,MAAQA,KAAKE,SAAS,aACrFV,MAAMW,OACPP,OAASA,MAAMC,MAAMM,OACnBL,MAAQA,KAAKC,MAAMI,OACjB,CAACH,KAAMI,IAAMJ,KAAKC,WAAW,OAASD,KAAKE,SAAS,OAASJ,KAAKC,MAAMK,EAAI,IAAIH,WAAW,WAIrG,qBA7DO,SAASI,UAAUb,OACxB,GAAIC,MAAMC,QAAQF,OAChB,OAAOA,MAAMc,IAAID,WAGnB,MAAO,IACFb,MACHK,MAAOL,MAAMK,MAAMS,KAAIR,OAAS,IAC3BA,KACHC,MAAOD,KAAKC,MAAMO,KAChB,CAACN,KAAMI,IACJJ,KAAKC,WAAW,OAASD,KAAKE,SAAS,OAASJ,KAAKC,MAAMK,EAAI,IAAIH,WAAW,MAC3ED,KACAA,KAAO,WAIrB,qBAEO,SAASO,UAAUf,OACxB,GAAIC,MAAMC,QAAQF,OAChB,OAAOA,MAAMc,IAAIC,WAGnB,MAAO,IACFf,MACHK,MAAOL,MAAMK,MAAMS,KAAIR,OAAS,IAC3BA,KACHC,MAAOD,KAAKC,MAAMO,KAAIN,MAAQA,KAAKE,SAAS,MAAQF,KAAKQ,UAAU,EAAGR,KAAKS,OAAS,GAAKT,WAG/F,CA8BC"}